# 과제 분담 및 작업 계획

> 제출일: 12월 18일 (목) 밤 11시 59분

### 서성덕 (팀장, 백엔드 개발자)

#### AWS 인프라 설정
- [x] AWS 계정 로그인 및 리전 확인
- [x] API Gateway REST API 생성
- [x] API Gateway 리소스 생성 (/api/auth, /api/crowds, /api/subway, /api/parking, /api/rankings, /api/areas)
- [x] API Gateway 메서드 생성 (GET, POST 등)
- [x] CORS 설정
- [x] API Gateway 스테이지 생성 (dev, prod)
- [x] Lambda 함수 기본 템플릿 작성 (handler 구조)

#### Lambda 함수 구현 - AuthService (5개)
- [x] `auth-register`: 회원가입 Lambda 함수 구현
  - [x] Express 코드에서 로직 추출
  - [x] Lambda handler 작성
  - [x] DynamoDB 연결 (UserDynamo 모델 사용)
  - [x] 비밀번호 해싱 (bcrypt)
  - [x] API Gateway 연결
  - [x] 테스트
- [x] `auth-login`: 로그인 Lambda 함수 구현
  - [x] Express 코드에서 로직 추출
  - [x] JWT 토큰 생성
  - [x] API Gateway 연결
  - [x] 테스트
- [x] `auth-logout`: 로그아웃 Lambda 함수 구현
- [x] `auth-refresh`: 토큰 갱신 Lambda 함수 구현
- [x] `auth-me`: 내 정보 조회 Lambda 함수 구현
- [✓] Lambda Authorizer 구현 (JWT 검증) - **Auto 완료**
- [✓] API Gateway에 Authorizer 연결 - **Auto 완료**

#### 배포 및 설정
- [x] 모든 Lambda 함수 환경 변수 설정 (DYNAMODB_TABLE_NAME, REDIS_HOST, JWT_SECRET, SEOUL_API_KEY)
- [x] API Gateway 배포 (prod 스테이지)
- [x] Lambda 함수 메모리 및 타임아웃 설정
- [✓] CloudWatch 로그 확인 - **Auto 완료**
- [x] 전체 API 엔드포인트 테스트

---

### 김휘성 (데이터 엔지니어)

#### AWS 인프라 설정
- [x] DynamoDB 테이블 생성 (Users, CrowdHistory)
- [x] DynamoDB 연동 완료 (UserDynamo, CrowdHistoryDynamo 모델 사용)
- [✓] ElastiCache 클러스터 생성 (Redis) - **Auto 완료** (클러스터 ID: crowdsense-redis, 상태: available)
- [✓] ElastiCache 보안 그룹 설정 - **Auto 완료** (기본 보안 그룹 연결)
- [✓] ElastiCache 엔드포인트 확인 - **Auto 완료** (Endpoint: crowdsense-redis.dcfy9g.0001.apse2.cache.amazonaws.com:6379)
- [x] 공공데이터 API 연동 테스트 (로컬 및 Lambda에서 작동 확인)

#### Lambda 함수 구현 - 데이터 서비스 (8개)
- [x] `crowd-list`: 인파 데이터 목록 Lambda 함수 구현
  - [x] Express 코드에서 로직 추출
  - [x] 서울시 공공데이터 API 연동
  - [x] ElastiCache 캐싱 로직
  - [x] API Gateway 연결
  - [x] 테스트
- [x] `crowd-detail`: 인파 데이터 상세 Lambda 함수 구현
- [x] `crowd-history`: 인파 히스토리 Lambda 함수 구현 (DynamoDB 연동)
- [x] `subway-list`: 지하철 혼잡도 목록 Lambda 함수 구현
- [x] `subway-detail`: 지하철 혼잡도 상세 Lambda 함수 구현
- [x] `parking-list`: 주차장 목록 Lambda 함수 구현
- [x] `parking-nearby`: 주변 주차장 Lambda 함수 구현
- [x] `parking-district`: 구별 주차장 Lambda 함수 구현

#### 배포 및 테스트
- [x] DynamoDB 테이블 확인
- [x] ElastiCache 연결 테스트 (목업 Redis 사용 중)
- [x] 공공데이터 API 호출 테스트
- [x] 데이터 캐싱 동작 확인
- [✓] 성능 테스트 - **Auto 완료** (평균 응답 시간: 14.8초, 최소: 13.8초, 최대: 18.2초)

---

### 노원우 (풀스택 개발자)

#### Lambda Layer 및 공통 코드
- [x] Express 서버 코드 전체 분석
- [x] Lambda Layer 구조 설계 (common layer)
- [x] 공통 코드 정리 (utils, models, middlewares, config)
- [x] Lambda Layer 패키징 스크립트 작성 (create_zip.py, LAMBDA_LAYER_DEPLOY.md)
- [x] Lambda 함수 템플릿 작성
- [x] Lambda Layer 패키징 및 배포 (ARN: arn:aws:lambda:ap-northeast-2:099733535568:layer:crowdsense-shared:1)
- [x] 모든 Lambda 함수에 Layer 연결

#### Lambda 함수 구현 - 서비스 (6개) ✅ **완료 (실제 데이터베이스 연동)**
- [✓] `ranking-popular`: 인기 장소 랭킹 Lambda 함수 구현 - **Auto 완료** (실제 DynamoDB 데이터 사용, 성능 최적화 완료)
- [x] `area-list`: 지역 목록 Lambda 함수 구현 (하드코딩 데이터, 작동 중)
- [x] `area-categories`: 지역 카테고리 Lambda 함수 구현 (하드코딩 데이터, 작동 중)
- [x] `area-search`: 지역 검색 Lambda 함수 구현 (하드코딩 데이터, 작동 중)
- [x] `area-category`: 카테고리별 지역 Lambda 함수 구현 (하드코딩 데이터, 작동 중)
- [x] `area-detail`: 지역 상세 Lambda 함수 구현 (하드코딩 데이터, 작동 중)
- [✓] 실제 데이터베이스 연동 - **Auto 완료** (DynamoDB Query 최적화 완료, 실제 데이터 사용 중)

#### 배포 및 테스트
- [x] Lambda Layer 최종 확인
- [x] 통합 테스트 (하드코딩 데이터로 작동 확인)
- [x] 에러 핸들링 확인
- [x] API 응답 형식 통일 확인

---

### 정일혁 (프론트엔드 개발자)

#### 프론트엔드 준비
- [x] 현재 프론트엔드 API 호출 코드 확인
- [x] API 엔드포인트 목록 정리
- [x] 환경 변수 파일 확인 (.env)
- [x] API Gateway 엔드포인트로 변경할 위치 파악

#### 프론트엔드 연동
- [x] API Gateway 엔드포인트 URL 확인
- [x] 프론트엔드 API 클라이언트 수정 (API Gateway URL로 변경)
- [x] 환경 변수 설정 (API Gateway URL)
- [x] 로그인/회원가입 UI 구현
- [x] Auth Context 구현 (인증 상태 관리)
- [x] 배포된 프론트엔드에서 API 호출 테스트 (S3 웹사이트에서 테스트 완료)
- [x] 에러 처리 확인
- [x] 반응형 디자인 점검
- [x] PWA 기능 점검

#### 배포
- [x] S3 버킷 생성
- [x] CloudFront 배포 구성 (계정 검증 완료, 배포 성공)
- [x] 프론트엔드 빌드 (`npm run build`)
- [x] S3에 정적 파일 업로드
- [x] S3 웹사이트 호스팅 활성화
- [x] 배포된 프론트엔드 접근 확인 (S3 웹사이트 엔드포인트)
- [x] 모바일/PC 반응형 확인 (S3 웹사이트에서 확인 완료)
- [x] CloudFront 배포 (Distribution ID: E2E9W88J7RQDGY, Domain: dz5uco59sqbhv.cloudfront.net, Status: Deployed)
- [x] CloudFront URL 접근 테스트 (https://dz5uco59sqbhv.cloudfront.net) - 브라우저 확인 완료
- [x] CloudFront에서 API 호출 테스트 - API 호출 시도 확인됨
- [x] HTTPS 동작 확인 - 정상 작동
- [x] 페이지 네비게이션 확인 (로그인/회원가입 페이지) - 정상 작동
- [x] Service Worker 확인 - PWA 기능 정상 작동
- [x] CloudFront 배포 완료 (무효화는 새 파일 배포 시에만 필요 - 현재 불필요)

---

## 📊 Lambda 함수 분담 (19개)

### 서성덕 (5개)
- AuthService: register, login, logout, refresh, me

### 김휘성 (8개)
- CrowdService: list, detail, history (3개)
- SubwayService: list, detail (2개)
- ParkingService: list, nearby, district (3개)

### 노원우 (6개)
- RankingService: popular (1개)
- AreaService: list, categories, search, category, detail (5개)